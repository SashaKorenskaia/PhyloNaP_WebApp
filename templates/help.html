<!-- BEGIN: Navigation Bar -->
{% extends "base.html" %}

{% block css %}
<style>
    /* Custom styles for help page using overall.css variables */
    .help-sidebar {
        background-color: var(--background-light, #E0E0E0);
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .help-sidebar .card-header {
        background-color: var(--background-light, #E0E0E0);
        color: var(--background-light, #E0E0E0);
        border-bottom: none;
        font-weight: 600;
    }

    .help-sidebar .list-group-item {
        border-color: #ddd;
        transition: all 0.3s ease;
    }

    .help-sidebar .list-group-item:hover,
    .help-sidebar .list-group-item.active {
        background-color: var(--bright-color, #7B1B38);
        color: var(--background-light, #E0E0E0);
        border-color: var(--bright-color, #7B1B38);
    }

    .section-header {
        color: var(--bright-color, #7B1B38);
        border-bottom-color: var(--bright-color, #7B1B38) !important;
        font-weight: 600;
    }

    .custom-alert {
        /* background-color: rgba(123, 27, 56, 0.1); */
        background-color: var(--background-light, #E0E0E0);
        border-left: 4px solid var(--background-dark, #3D3D3D);
        color: var(--background-dark, #3D3D3D);
    }

    .pipeline-step {
        background-color: var(--bright-color, #7B1B38) !important;
        border-color: var(--bright-color, #7B1B38) !important;
    }

    .pipeline-step:nth-child(2) .pipeline-icon {
        background-color: var(--background-dark, #3D3D3D) !important;
    }

    /* Simplified card styling */
    .simple-card {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .simple-card h6 {
        color: var(--background-dark, #3D3D3D);
        font-weight: 600;
        margin-bottom: 10px;
    }

    .highlight-box {
        background-color: rgba(224, 224, 224, 0.1);
        border: 1px solid var(--background-light, #E0E0E0);
        border-radius: 6px;
        padding: 15px;
    }

    .custom-badge {
        background-color: var(--bright-color, #7B1B38);
        color: var(--background-light, #E0E0E0);
    }

    .link-custom {
        color: var(--bright-color, #7B1B38);
        text-decoration: none;
    }

    .link-custom:hover {
        color: var(--background-dark, #3D3D3D);
        text-decoration: underline;
    }

    /* Remove card overhead for cleaner look */
    .clean-section {
        background-color: #f8f9fa;
        border-radius: 6px;
        padding: 20px;
        margin: 15px 0;
    }
</style>
{% endblock %}

{% block content %}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar Navigation -->
        <div class="col-md-3">
            <div class="sticky-top" style="top: 20px;">
                <div class="card help-sidebar">
                    <div class="card-header">
                        <h5 class="mb-0">Help Topics</h5>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="#overview" class="list-group-item list-group-item-action">Database Overview</a>
                        <a href="#phylogenetic-trees" class="list-group-item list-group-item-action">Phylogenetic
                            Trees</a>
                        <a href="#classification" class="list-group-item list-group-item-action">Enzyme
                            Classification</a>
                        <a href="#submission" class="list-group-item list-group-item-action">Data contribution</a>
                        <a href="#contact" class="list-group-item list-group-item-action">Contact & Legal</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <!-- Introduction -->
            <div class="mb-5">
                <div class="alert custom-alert">
                    <h5 class="mt-2"></h5>
                    <h5><i class="fa fa-info-circle"></i> Motivation</h5>
                    <p>Natural products are a major source of novel drugs, and with the rise of antibiotic resistance,
                        there is an urgent need
                        to discover new compounds. Genome mining enables the rapid identification of biosynthetic gene
                        clusters (BGCs)
                        responsible for natural product biosynthesis. Predicting the structures of the synthesized
                        compounds is key to guiding
                        their targeted discovery, but this requires detailed knowledge of the enzymatic reactions at
                        each step of the
                        biosynthetic pathway. While the core scaffold of many natural products can often be predicted
                        from the initial
                        biosynthetic steps, later tailoring modifications remain difficult to model due to the limited
                        characterization of the
                        enzymes involved. Reliable reaction prediction requires first gathering functional annotations
                        and performing
                        evolutionary analysis of these enzymesâ€”only then can accurate computational predictions be made.
                        In the absence of
                        automated tools, this process becomes time-consuming. Although phylogenetic trees with
                        functional annotations are
                        occasionally published, reusing them directly is labor-intensive and technically challenging.
                    </p>
                    <p>PhyloNaP addresses this gap by providing a centralized collection of annotated phylogenetic trees
                        for enzymes involved
                        in natural product biosynthesis.</p>
                </div>
            </div>

            <!-- 1. Database Overview -->
            <section id="overview" class="mb-5">
                <h2 class="border-bottom pb-2 section-header">1. Database Content Overview</h2>

                <div class="row mb-4">
                    <div class="col-md-8">
                        <h4>What's in the Database</h4>
                        <p>PhyloNaP's database contains comprehensive phylogenetic datasets for protein families
                            involved
                            in natural product biosynthesis. Each dataset includes:</p>
                        <ul>
                            <li><strong>Phylogenetic tree</strong> with evolutionary model</li>
                            <li><strong>Sequence files</strong> in FASTA format</li>
                            <li><strong>Multiple sequence alignments</strong></li>
                            <li><strong>Annotation files</strong> with functional data</li>
                            <li><strong>Optional elements:</strong> descriptions, superfamily classifications, reaction
                                pathway images, and natural product structures</li>
                        </ul>
                    </div>
                </div>

                <h4>Database Composition</h4>
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="simple-card">
                            <h6><i class="fa fa-check-circle"></i> Curated Datasets (10)</h6>
                            <p class="small">High-quality, manually reviewed datasets from:</p>
                            <ul class="small">
                                <li>Supplementary data or metadata from published articles</li>
                                <li>Directly obtained from authors</li>
                                <li>Provided by collaborators</li>
                            </ul>
                            <!-- <p class="small"><strong>Features:</strong> Full citation information, manually curated
                                annotations</p> -->
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="simple-card">
                            <h6><i class="fa fa-cogs"></i> Automated Datasets (~18,500)</h6>
                            <p class="small">Computationally generated phylogenetic trees covering:</p>
                            <ul class="small">
                                <li>Broad enzyme family coverage</li>
                                <li>Standardized quality control</li>
                                <li>Consistent annotation pipeline</li>
                            </ul>
                            <!-- <p class="small"><strong>Features:</strong> Large-scale coverage, systematic processing,
                                regular updates</p> -->
                        </div>
                    </div>
                </div>

                <h4>Database Navigation</h4>
                <div class="highlight-box">
                    <p>Users can efficiently explore the database using multiple filtering and sorting options:</p>
                    <img src="{{ url_for('static', filename='pictures/database.png') }}"
                        style="width: 100%; height: 100%; object-fit: cover;">
                    <div class="row">
                        <div class="col-md-6">
                            <ul>
                                <li><strong>HMM name:</strong> Focus on specific enzyme families</li>
                                <li><strong>Source</strong> Distinguishes manually generated and annotated datasers and
                                    those generated by PhyloNaP
                                    pipeline</li>
                                <li><strong>Data type</strong> The automatic pipeline include only full proteins, but we
                                    kept an option for long
                                    multidomain proteins to load the datasets on specific domains </li>

                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul>
                                <li><strong>N of sequences:</strong> The overall dataset size</li>
                                <li><strong>N of characterized:</strong> Number of proteins with known reaction
                                    (Proteins sourced from SwissProt+having
                                    Rhea number or from MITE)</li>
                                <li><strong>N of validated NP:</strong> Number of proteins from BGC, synthesizing
                                    characterized natural product (an
                                    entry from MiBiG)</li>
                                <li><strong>N of predicted NP:</strong> Number of proteins from predicted BGC
                                    (antiSMASHdb)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <h4>Database Generation Pipeline</h4>
                <div class="row">
                    <div class="col-12">
                        <div class="text-center mb-3">
                            <img src="/static/images/help/pipeline_flow.png" class="img-fluid"
                                alt="Database Generation Pipeline" style="max-height: 400px;">
                            <p class="small text-muted mt-2">Comprehensive pipeline for automatic dataset generation</p>
                        </div>
                    </div>
                </div>

                <div class="clean-section">
                    <h5>Pipeline Steps</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6><strong>A) Data Collection</strong></h6>
                            <p class="small">Protein sequences and annotations gathered from multiple high-quality
                                databases:</p>
                            <ul class="small">
                                <li><strong>MiBIG:</strong> Characterized biosynthetic gene clusters</li>
                                <li><strong>MITE:</strong> Tailoring enzymes with experimentally proven reactions</li>
                                <li><strong>antiSMASH DB:</strong> Predicted biosynthetic gene clusters</li>
                                <li><strong>UniProt SwissProt:</strong> Curated protein annotations</li>
                            </ul>
                            <p class="small">Collected data includes taxonomic information, BGC types, functional
                                annotations, and structural data (SMILES) when available.</p>

                            <h6><strong>B) Sequence Clustering</strong></h6>
                            <p class="small">Sequences clustered using <code>mmseqs easy-linclust</code> with default
                                parameters (E-value: 1.000E-03) to group related proteins.</p>

                            <h6><strong>C) Quality Filtering</strong></h6>
                            <p class="small">Clusters are filtered to remove:</p>
                            <ul class="small">
                                <li>Explicitly eukaryotic proteins or SwissProt-only clusters</li>
                                <li>Small clusters (&lt;20 sequences)</li>
                                <li>Sequences with unusual lengths (&lt;150 or &gt;1000 amino acids)</li>
                                <li>NRPS/PKS sequences (require domain-level analysis)</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6><strong>D) Phylogenetic Analysis</strong></h6>
                            <ol class="small">
                                <li><strong>Alignment:</strong> Sequences aligned with <code>MAFFT auto</code></li>
                                <li><strong>Trimming:</strong> Alignments trimmed with <code>TrimAl auto</code></li>
                                <li><strong>Deduplication:</strong> Identical sequences removed (annotations preserved)
                                </li>
                                <li><strong>Tree construction:</strong> Phylogenetic trees built with
                                    <code>FastTree</code>
                                </li>
                                <li><strong>Rooting:</strong> Trees rooted using <code>MAD-root</code></li>
                            </ol>

                            <h6><strong>E) Functional Classification</strong></h6>
                            <p class="small">All sequences classified into superfamilies using <code>HMMER</code> with
                                superfamilies_1.75 profiles for consistent functional annotation.</p>

                            <div class="custom-alert alert mt-3">
                                <h6><i class="fa fa-info-circle"></i> Quality Assurance</h6>
                                <p class="small mb-0">Each step includes quality control measures to ensure reliable
                                    phylogenetic reconstructions and meaningful functional predictions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Phylogenetic Trees -->
            <section id="phylogenetic-trees" class="mb-5">
                <h2 class="border-bottom pb-2 section-header">2. Examining Phylogenetic Tree Pages</h2>

                <div class="custom-alert alert mb-4">
                    <h5><i class="fa fa-tree"></i> Interactive Tree Visualization</h5>
                    <p>PhyloNaP provides powerful interactive tools for exploring phylogenetic relationships and
                        functional annotations. Each tree page combines evolutionary context with biochemical
                        information to facilitate enzyme function prediction.</p>
                </div>

                <h4>Explore the Tree</h4>
                <img src="{{ url_for('static', filename='pictures/tree.png') }}"
                    style="width: 100%; height: 100%; object-fit: cover;">
                <h4>Summary of the clade feature</h4>
                <p> When you click on a node and select "Get the summary of the clade", a metadata summary is displayed.
                    This summary shows all features associated with the selected node, and the descendant branches of
                    that node will be highlighted in color.</p>
                <p>By default, the features are sorted from those with the most identical values to those with the
                    greatest diversity.
                    However, users can adjust the sorting order manually using the arrow buttons.
                    :</p>
                <img src="{{ url_for('static', filename='pictures/metadata.png') }}"
                    style="width: 100%; height: 100%; object-fit: cover;">
                <!-- <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="simple-card">
                            <img src="/static/images/help/tree_features.png" class="img-fluid mb-2" alt="Tree Features">
                            <h6>Interactive Tree Controls</h6>
                            <ul class="small">
                                <li><strong>Zoom & Pan:</strong> Navigate large trees with mouse controls</li>
                                <li><strong>Layout Options:</strong> Switch between radial and linear views</li>
                                <li><strong>Branch Spacing:</strong> Adjust vertical and horizontal spacing</li>
                                <li><strong>Tip Alignment:</strong> Align leaf nodes for better comparison</li>
                                <li><strong>Node Selection:</strong> Click branches to highlight clades</li>
                            </ul>
                        </div>
                    </div> -->
                <!-- <div class="col-md-6">
                    <div class="simple-card">
                        <img src="/static/images/help/annotation_columns.png" class="img-fluid mb-2"
                            alt="Annotation Columns">
                        <h6>Annotation Columns</h6>
                        <ul class="small">
                            <li><strong>BGC Products:</strong> Visual representations of natural products</li>
                            <li><strong>Reaction Pathways:</strong> Chemical transformation images</li>
                            <li><strong>Metadata Display:</strong> Taxonomic and functional information</li>
                            <li><strong>Custom Annotations:</strong> Toggle different data types</li>
                            <li><strong>Dynamic Positioning:</strong> Columns adjust with tree layout</li>
                        </ul>
                    </div>
                </div> -->
        </div>

        <!-- <h4>Tree Navigation Guide</h4>
        <div class="highlight-box">
            <div class="row">
                <div class="col-md-8">
                    <p><strong>Basic Tree Interaction:</strong></p>
                    <ul>
                        <li><strong>Pan:</strong> Click and drag to move around large phylogenetic trees</li>
                        <li><strong>Zoom:</strong> Use mouse wheel to zoom in/out on specific regions</li>
                        <li><strong>Select:</strong> Click on nodes or branches to highlight evolutionary clades
                        </li>
                        <li><strong>Spacing:</strong> Use control buttons to adjust tree layout for optimal
                            viewing</li>
                    </ul>
                    <p><strong>Annotation Panel Usage:</strong></p>
                    <ul>
                        <li><strong>Toggle Annotations:</strong> Use sidebar buttons to show/hide different data
                            types</li>
                        <li><strong>Image Viewing:</strong> Click on chemical structure images for enlarged
                            views</li>
                        <li><strong>Responsive Layout:</strong> Annotation columns automatically reposition as
                            you modify tree spacing</li>
                        <li><strong>Data Integration:</strong> Combine phylogenetic and biochemical information
                            for comprehensive analysis</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <img src="/static/images/help/tree_controls.png" class="img-fluid border" alt="Tree Controls">
                    <p class="small text-muted mt-2">Tree control interface</p>
                </div>
            </div>
        </div> -->

        <!-- <div class="row mt-4">
            <div class="col-md-4">
                <div class="simple-card text-center">
                    <h6>Curated Trees</h6>
                    <p class="small">High-quality trees with:</p>
                    <ul class="small text-left">
                        <li>Literature citations</li>
                        <li>Experimental validation</li>
                        <li>Author contributions</li>
                        <li>Detailed descriptions</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4">
                <div class="simple-card text-center">
                    <h6>Automated Trees</h6>
                    <p class="small">Systematically generated with:</p>
                    <ul class="small text-left">
                        <li>Standardized methods</li>
                        <li>Quality control filters</li>
                        <li>Consistent annotations</li>
                        <li>Regular updates</li>
                    </ul>
                </div>
            </div> -->
        <!-- <div class="col-md-4">
                <div class="simple-card text-center">
                    <h6>Annotation Types</h6>
                    <p class="small">Available data includes:</p>
                    <ul class="small text-left">
                        <li>Chemical structures</li>
                        <li>Reaction mechanisms</li>
                        <li>Taxonomic information</li>
                        <li>Functional classifications</li>
                    </ul>
                </div>
            </div>
        </div> -->
        </section>

        <!-- 3. Classification Pipeline -->
        <section id="classification" class="mb-5">
            <h2 class="border-bottom pb-2 section-header">3. Classifying an Enzyme</h2>

            <h4>Classification Pipeline</h4>
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <div class="pipeline-step text-white rounded p-3 mb-2 pipeline-icon">
                                <i class="fa fa-upload fa-2x"></i>
                            </div>
                            <strong>1. Sequence Input</strong>
                            <p class="small">Submit protein sequences in FASTA format</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="pipeline-step text-white rounded p-3 mb-2 pipeline-icon">
                                <i class="fa fa-search fa-2x"></i>
                            </div>
                            <strong>2. Homology Search</strong>
                            <p class="small">BLAST against reference database</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="pipeline-step text-white rounded p-3 mb-2 pipeline-icon">
                                <i class="fa fa-tree fa-2x"></i>
                            </div>
                            <strong>3. Tree Placement</strong>
                            <p class="small">Place sequences in phylogenetic context</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="pipeline-step text-white rounded p-3 mb-2 pipeline-icon">
                                <i class="fa fa-check-circle fa-2x"></i>
                            </div>
                            <strong>4. Function Prediction</strong>
                            <p class="small">Infer function from phylogenetic position</p>
                        </div>
                    </div>
                </div>
            </div>

            <h4>Understanding Result Pages</h4>
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="simple-card">
                        <h6><i class="fa fa-table"></i> Results Table</h6>
                        <img src="/static/images/help/results_table.png" class="img-fluid mb-2" alt="Results Table">
                        <ul class="small">
                            <li><strong>Query:</strong> Your input sequence identifier</li>
                            <li><strong>Confidence:</strong> Placement reliability (0-1)</li>
                            <li><strong>Branch Length:</strong> Evolutionary distance</li>
                            <li><strong>Family/Superfamily:</strong> Functional classification</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="simple-card">
                        <h6><i class="fa fa-tree"></i> Tree Placement View</h6>
                        <img src="/static/images/help/tree_placement.png" class="img-fluid mb-2" alt="Tree Placement">
                        <ul class="small">
                            <li><strong>Query Position:</strong> Shows where your sequence fits</li>
                            <li><strong>Colored Branches:</strong> Highlight placement confidence</li>
                            <li><strong>Annotations:</strong> Display functional context</li>
                            <li><strong>Interactive Exploration:</strong> Navigate and analyze</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="custom-alert alert">
                <h6><i class="fa fa-lightbulb"></i> Interpreting Results</h6>
                <div class="row">
                    <div class="col-md-6">
                        <strong>Confidence Levels:</strong>
                        <ul>
                            <li>0.8-1.0: High confidence placement</li>
                            <li>0.5-0.8: Moderate confidence</li>
                            <li>&lt;0.5: Low confidence, interpret carefully</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <strong>Branch Length:</strong>
                        <ul>
                            <li>&lt;0.5: Close homolog, reliable function</li>
                            <li>0.5-1.0: Moderate distance</li>
                            <li>&gt;1.0: Distant relationship <span class="badge custom-badge">Caution</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Submission Portal -->
        <section id="submission" class="mb-5">
            <h2 class="border-bottom pb-2 section-header">4. Data contribution</h2>

            <div class="row">
                <div class="col-md-8">
                    <h4>How to Submit Sequences</h4>
                    <div class="simple-card">
                        <ol>
                            <li><strong>Prepare Your Data:</strong>
                                <ul>
                                    <li>Protein sequences in FASTA format</li>
                                    <li>One or multiple sequences per submission</li>
                                    <li>Include descriptive sequence names</li>
                                </ul>
                            </li>
                            <li><strong>Upload Options:</strong>
                                <ul>
                                    <li>Paste sequences directly into text area</li>
                                    <li>Upload FASTA file from your computer</li>
                                    <li>Maximum file size: 10MB</li>
                                </ul>
                            </li>
                            <li><strong>Job Configuration:</strong>
                                <ul>
                                    <li>Provide email for notification (optional)</li>
                                    <li>Set job description for easy identification</li>
                                    <li>Choose analysis parameters if needed</li>
                                </ul>
                            </li>
                            <li><strong>Submit & Track:</strong>
                                <ul>
                                    <li>Receive unique job ID for tracking</li>
                                    <li>Monitor progress on results page</li>
                                    <li>Results typically ready in 5-30 minutes</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="simple-card">
                        <h6>Supported Formats</h6>
                        <img src="/static/images/help/fasta_example.png" class="img-fluid mb-2" alt="FASTA Example">
                        <small class="text-muted">Example FASTA format</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Contact & Legal -->
        <section id="contact" class="mb-5">
            <h2 class="border-bottom pb-2 section-header">5. Contact & Legal Information</h2>

            <div class="row">
                <div class="col-md-6">
                    <div class="simple-card">
                        <h5><i class="fa fa-envelope"></i> Contact Information</h5>
                        <p><strong>Development Team:</strong></p>
                        <ul>
                            <li>Principal Investigator: [Name]</li>
                            <li>Email: <a href="mailto:contact@phylonap.org"
                                    class="link-custom">contact@phylonap.org</a></li>
                            <li>Institution: [Your Institution]</li>
                            <!-- <li>GitHub: <a href="https://github.com/your-repo" target="_blank"
                                            class="link-custom">PhyloNaP Repository</a></li> -->
                        </ul>
                        <!-- 
                                <p><strong>Bug Reports & Feature Requests:</strong></p>
                                <p>Please use our <a href="https://github.com/your-repo/issues" target="_blank"
                                        class="link-custom">GitHub Issues</a> page for technical problems and feature
                                    suggestions.</p> -->
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="simple-card">
                        <h5><i class="fa fa-shield"></i> Data Usage & Privacy</h5>
                        <p><strong>License:</strong></p>
                        <p>PhyloNaP is released under the <a href="https://opensource.org/licenses/MIT" target="_blank"
                                class="link-custom">MIT License</a>. The software is free to use for
                            academic and commercial purposes.</p>

                        <p><strong>Data Privacy:</strong></p>
                        <ul>
                            <li>Submitted sequences are processed temporarily</li>
                            <li>No sequences are permanently stored</li>
                            <li>Job results are kept for 30 days</li>
                            <li>No personal data is collected beyond optional email</li>
                        </ul>

                        <p><strong>Cookies:</strong></p>
                        <p>This site uses minimal functional cookies to maintain session state. No tracking or
                            analytics cookies are used.</p>
                    </div>
                </div>


                <div class="row mt-4">
                    <div class="col-12">
                        <div class="simple-card">
                            <h5><i class="fa fa-quote-left"></i> Citation</h5>
                            <p>If you use PhyloNaP in your research, please cite:</p>
                            <div class="highlight-box">
                                <code>[Your Name], et al. "PhyloNaP: Phylogenetic Analysis for Natural Product Biosynthesis Enzyme Function Prediction." [Journal] [Year]. DOI: [DOI]</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
</div>

<!-- Smooth scrolling for navigation -->
<script>
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // Update active navigation item based on scroll position
    window.addEventListener('scroll', function () {
        let scrollPosition = window.scrollY;

        document.querySelectorAll('section[id]').forEach(section => {
            let sectionTop = section.offsetTop - 100;
            let sectionHeight = section.offsetHeight;
            let sectionId = section.getAttribute('id');

            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                document.querySelectorAll('.list-group-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`a[href="#${sectionId}"]`).classList.add('active');
            }
        });
    });
</script>

{% endblock %}