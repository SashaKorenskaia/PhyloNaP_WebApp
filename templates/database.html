<!-- templates/database.html -->
{% extends "base.html" %}
{% block content %}
<ul id="file-list">
    {% for folder, files in folders.items() %}
        {% for file in files %}
            <li>
                {{ file }}
                <button class="show-button" data-folder="{{ folder }}" data-filename="{{ file }}">Show</button>
            </li>
        {% endfor %}
    {% endfor %}
    {% for folder in folders %}
    <input type="radio" id="{{ folder }}" name="folder" value="{{ folder }}">
    <label for="{{ folder }}">{{ folder }}</label>
{% endfor %}
    </ul>
    <div id="tree"></div>

    <img id="tree-image" src="">
    <script>
       document.querySelectorAll('.show-button').forEach(function(button) {
    button.addEventListener('click', function() {

        var filename = button.getAttribute('data-filename');
        var folder = document.querySelector('input[name="folder"]:checked').value;

        fetch('/tree', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: new URLSearchParams({
                'folder': folder,
                'filename': filename
            }),
            })
            .then(response => response.text())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));

        });
    });
    </script>

{% endblock %}